---
title: Supply         
parent: Features
nav_order: 13
layout: default
---

# Supply System

*Adds an automated resupply system for munitions*

---

## ‚úÖ Purpose

This system generates ammo resupply crate inventory based on player loadouts.


---

## ‚öôÔ∏è How It Works

Ammo resupply crates are generated by pulling magazines and throwables from playable loadouts, and storing them. Depending on the setup, this may have to be done semi-automatically by the mission maker.

Supply boxes can be prespawned by the mission-maker, added via zeus or spawned via the box spawner..

- This function works well with the boxspawner, as ammo resupply boxes will use the same code as prespawned ammo boxes.
- The boxes used for supply are made weightless so that they can be carried and dragged via ACE regardless of their actualy weight.

---

## üõ†Ô∏è Mission Maker Usage

The Supply system is enabled by default. If you do not want to use it, you don't need to touch anything.

There are a couple of steps to set up depending on if you have the Role Restricted Arsenal enabled or not:

Role Restricted Arsenal - DISABLED
{: .label .label-red }

Use the following steps to setup the ammo resupply contents:

Step 1: Enter the editor, build your player loadouts, make sure you are happy with them.

Step 2: In the editor, go to `Tools >> Debug Console`

Step 3: Copy and Paste the following code into the field, and press `Local Exec`:

```sqf
private _units = playableUnits + switchableUnits; 
 
private _prim = []; 
private _sec = []; 
private _hg = []; 
private _gr = []; 
 
{ 
    private _pMags = primaryWeaponMagazine _x; 
    private _sMags = secondaryWeaponMagazine _x; 
    private _hMags = handgunMagazine _x; 
 
    { _prim pushBackUnique _x } forEach _pMags; 
    { _sec pushBackUnique _x } forEach _sMags; 
    { _hg pushBackUnique _x } forEach _hMags; 
 
	private _thrown = throwables _x apply { _x select 0 };
	{ _gr pushBackUnique _x } forEach _thrown;
 
} forEach _units; 
  
private _output = [ 
    "// Auto-generated resupply config", 
    format ["JM_PrimMags = %1;", _prim], 
    format ["JM_SecMags = %1;", _sec], 
    format ["JM_HGmags  = %1;", _hg], 
    format ["JM_Grenades = %1;", _gr] 
] joinString endl; 
 
copyToClipboard _output; 
hint "Resupply arrays copied to clipboard!"; 

```

Step 4: Go into the mission framework and access `JM_Framework >> Supply >> getMags.sqf`

Step 5: Paste the output from your clipboard, replacing the already existing auto-generated resupply config

Step 6: Done!

Role Restricted Arsenal - ENABLED
{: .label .label-green }

If Role Restricted Arsenal is enabled, it will automatically pull all magazines and grenades that you have given to your players (this includes all roles).

The resupply crates will be populated using this, so it should cover everyone.

{: .info }
There is a slight issue with the way that the Role Restricted Arsenal works with the Supply system. There is no reliable function to determine if a magazine is for secondary or primary weapons (because there is often crossover). Because of this, when using the Role Restricted Arsenal, every magazine will be treated as a <b>primary magazine</b> and secondary magazines will not be used. To account for this, you can lower the primary magazine count when creating the boxes if it bothers you. 

### HOW TO I SETUP SUPPLY CRATES BEFORE THE MISSION?

To initialise some supply crates at the beginning of the mission, place the following code into the init of the object you want to use:

For Ammunition Supply Crates: 
```sqf 
[this, 50, 20, 5, 10] execVM "JM_Framework\Supply\ammoCrate.sqf"; 
```


| Index        | Parameter          | Description |
|:-------------|:------------------|:------|
| 0           | this | The object that will become the supply crate. `this` is fine when running from the init box.  |
| 1           | 50  | Number of Primary Magazines  |
| 2           | 20 | Number of Secondary Magazines   |
| 3           | 5 | Number of Launcher Missiles  |
| 4           | 10 | Number of Throwables  |

For Medical Supply Crates: 
```sqf 
[this, 50, 20, 5, 10] execVM "JM_Framework\Supply\medCrate.sqf";
```


| Index        | Parameter          | Description |
|:-------------|:------------------|:------|
| 0           | this | The object that will become the supply crate. `this` is fine when running from the init box.  |
| 1           | 50  | Number of Basic Bandages  |
| 2           | 20 | Number of 1L Blood Bags   |
| 3           | 5 | Number of 500mL Blood Bags  |
| 4           | 10 | Number of 250mL Blood Bags  |
| 5           | 10 | Number of Splints |
| 6           | 10 | Number of Tourniquets  |
| 7           | 10 | Number of Painkillers  |
| 8           | 10 | Number of Epinephrine Autoinjectors  |
| 9           | 10 | Number of Morphine Autoinjectors  |


### OTHER CRATES




---

## üì¶ Dependencies


- CBA_A3
- ACE

---

## üîÅ Related Features

- [Rally Point System](rally.md)

---

## üß™ Notes & Tips

- This system is fully compatible with the Box Spawner system, as the crates spawned by that run the exact same code as the pre-initialised boxes.
- 

---
